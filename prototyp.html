<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Balatro Tracker</title>
    <link id="classic-style" rel="stylesheet" href="style.css">
    <link id="balatro-style" rel="stylesheet" href="balatro-style.css" disabled>
</head>
<body>

    <h1>Balatro Sticker Checker</h1>
    <div style="text-align: center; margin-bottom: 20px;">
        <label class="switch-container">
            <span style="margin-right: 10px;">Classic UI</span>
            <label class="switch">
                <input type="checkbox" id="style-switcher">
                <span class="slider"></span>
            </label>
            <span style="margin-left: 10px;">Balatro UI</span>
        </label>
    </div>

    <div class="profiles-section">
        <select id="profile-select"></select>
        <button id="add-profile-btn">+</button>
        <button id="delete-profile-btn">-</button>
    </div>

    <div id="profile-stats-container" class="stats-container">
    <div class="stat-card">
        <h3>Ukończono</h3>
        <div id="stat-completion" class="stat-value">-%</div>
        <div id="stat-completion-details" class="stat-details">Brak danych</div>
    </div>
    <div class="stat-card">
        <h3>Ulubiony Joker</h3>
        <div id="stat-favorite-joker-img" class="stat-joker-icon"></div>
        <div id="stat-favorite-joker-name" class="stat-value">Brak</div>
        <div id="stat-favorite-joker-details" class="stat-details">Brak wygranych</div>
    </div>
    <div class="stat-card">
        <h3>Nemesis Joker</h3>
        <div id="stat-nemesis-joker-img" class="stat-joker-icon"></div>
        <div id="stat-nemesis-joker-name" class="stat-value">Brak</div>
        <div id="stat-nemesis-joker-details" class="stat-details">Brak przegranych</div>
    </div>
</div>

    <div style="text-align: center; margin-bottom: 10px;">
        <button id="open-guide-btn" class="filter-btn" style="width: auto;">Jak to działa?</button>
        <button id="personality-test-btn" class="filter-btn" style="width: auto; margin-top: 5px;">Jaka jest Twoja Balatro-Osobowość?</button>
        <button id="todo-list-btn" class="filter-btn" style="width: auto; margin-top: 5px;">Pokaż Inteligentną Listę "Do Zrobienia"</button>
        <a href="studio.html" class="filter-btn" style="text-decoration: none;">Studio Jokerów</a>
    </div>

    <p>Wklej tutaj zawartość swojego pliku save.json</p>
    <textarea id="jsonInput" placeholder="Wklej JSON tutaj..."></textarea>
    <button onclick="processSaveFile()">Zapisz i Przetwórz</button>

    <div class="download-section">
        <button id="download-json-btn">Pobierz save.json</button>
        <button id="export-excel-btn">Eksportuj do Excela</button>
    </div>

    <div id="stake-filter-container" class="filter-container">
        <button class="stake-btn active" data-stake="all">All Stakes</button>
        <button class="stake-btn" data-stake="stake_white" style="background-color: #FFFFFF;"></button>
        <button class="stake-btn" data-stake="stake_red" style="background-color: #ff5454;"></button>
        <button class="stake-btn" data-stake="stake_green" style="background-color: #54ff54;"></button>
        <button class="stake-btn" data-stake="stake_black" style="background-color: #444444;"></button>
        <button class="stake-btn" data-stake="stake_blue" style="background-color: #5454ff;"></button>
        <button class="stake-btn" data-stake="stake_purple" style="background-color: #ff54ff;"></button>
        <button class="stake-btn" data-stake="stake_orange" style="background-color: #ffb454;"></button>
        <button class="stake-btn" data-stake="stake_gold" style="background-color: #ffd700;"></button>
    </div>

    <div class="search-container">
        <input type="text" id="search-input" placeholder="Szukaj Jokera (np. Vampire)...">
    </div>

    <div class="filter-container">
        <button class="filter-btn active" data-rarity="all">All</button>
        <button class="filter-btn" data-rarity="common">Common</button>
        <button class="filter-btn" data-rarity="uncommon">Uncommon</button>
        <button class="filter-btn" data-rarity="rare">Rare</button>
        <button class="filter-btn" data-rarity="legendary">Legendary</button>
        <button id="sort-usage-btn" class="filter-btn">Sort by...</button>
    </div>

    <div id="forgotten-jokers-container" class="forgotten-container">
        <button id="forgotten-jokers-btn">Maybe you forgor about us? 💀</button>
    </div>
    
    <div id="results"></div>

    <div id="guide-modal-overlay" class="modal-overlay">
        <div id="guide-modal" class="modal">
            <span id="close-guide-modal-btn" class="close-btn">&times;</span>
            <h2>Jak znaleźć i wkleić swój save?</h2>
            <ol>
                <li><strong>Znajdź folder z zapisem gry.</strong><br> Wciśnij `Win + R` i wklej: <code>%APPDATA%\Balatro</code></li>
                <li>W środku znajdziesz plik <code>save.jkr</code>.</li>
                <li><strong>Przekonwertuj plik.</strong> Użyj narzędzia online (np. "Balatro Save Editor"), aby zamienić go na <code>save.json</code>.</li>
                <li><strong>Skopiuj i wklej!</strong> Otwórz plik <code>save.json</code>, zaznacz całą zawartość (Ctrl+A) i wklej ją w pole na naszej stronie.</li>
            </ol>
        </div>
    </div>

    <div id="joker-modal-overlay" class="modal-overlay">
        <div id="joker-modal" class="modal">
            <span id="close-joker-modal-btn" class="close-btn">&times;</span>
            <div class="modal-content">
                <div class="modal-left"><div id="modal-joker-image" class="joker-image-container"></div></div>
                <div class="modal-right">
                    <h2 id="modal-joker-name">Nazwa Jokera</h2>
                    <p class="modal-rarity" id="modal-joker-rarity">Rzadkość</p>
                    <div class="modal-stats">
                        <div class="stat-item"><span>Win Rate</span><strong id="modal-win-rate">-%</strong></div>
                        <div class="stat-item"><span>Wygrane Gry</span><strong id="modal-total-wins">-</strong></div>
                        <div class="stat-item"><span>Wszystkie Gry</span><strong id="modal-total-games">-</strong></div>
                    </div>
                    <h4 class="modal-section-title">Completed Stakes</h4>
                    <div id="modal-joker-stakes" class="stickers"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="personality-modal-overlay" class="modal-overlay">
        <div id="personality-modal" class="modal" style="text-align: center;">
            <span id="close-personality-modal-btn" class="close-btn">&times;</span>
            <h2>Twoja Balatro-Osobowość to...</h2>
            <h1 id="personality-title" style="color: gold; font-size: 2.5em; margin: 10px 0;"></h1>
            <p id="personality-description" style="font-size: 1.1em;"></p>
            <hr style="border-color: #555; margin: 20px 0;">
            <p><strong>Kluczowy Dowód:</strong></p>
            <p id="personality-evidence"></p>
        </div>
    </div>

    <div id="todo-modal-overlay" class="modal-overlay">
        <div id="todo-modal" class="modal">
            <span id="close-todo-modal-btn" class="close-btn">&times;</span>
            <h2>Inteligentna Lista "Do Zrobienia"</h2>
            <div id="todo-list-content" style="text-align: left; max-height: 400px; overflow-y: auto; padding-right: 15px;"></div>
        </div>
    </div>

    <div id="forgotten-modal-overlay" class="modal-overlay">
        <div id="forgotten-modal" class="modal">
            <span id="close-forgotten-modal-btn" class="close-btn">&times;</span>
            <h2>Maybe you forgor about us? 💀</h2>
            <p style="text-align: center; margin-top: -10px; color: #aaa;">Oto Jokery, których jeszcze nie użyłeś. Daj im szansę!</p>
            <div id="forgotten-jokers-list" class="results-grid"></div>
        </div>
    </div>

    <script src="scripts/joker_data.js"></script>
    <script src="scripts/main.js"></script>
    <script src="scripts/modal.js"></script>
</body>
</html>